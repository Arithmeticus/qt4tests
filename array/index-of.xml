<?xml version="1.0" encoding="us-ascii"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="array-index-of" covers-40="array-index-of">
  <description>Tests for the array:index-of() function (4.0 proposal)</description>
  <link type="spec" document="http://www.w3.org/TR/xpath-functions-30/" idref="func-array-index-of"/>

  <dependency type="spec" value="XP40+ XQ40+"/>
  
  <test-case name="array-index-of-001">
    <description>Empty array</description>
    <created by="Michael Kay" on="2020-02-09"/>
    <test>array:index-of([], 23)</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="array-index-of-002">
    <description>No matches</description>
    <created by="Michael Kay" on="2020-02-09"/>
    <test>array:index-of(array{1 to 100}, -4)</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="array-index-of-003">
    <description>All matches</description>
    <created by="Michael Kay" on="2020-02-09"/>
    <test>array:index-of([3,3,3,3,3,3,3], 3)</test>
    <result>
      <assert-deep-eq>1 to 7</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="array-index-of-004">
    <description>Selective matches</description>
    <created by="Michael Kay" on="2020-02-09"/>
    <test>array:index-of(array{(1 to 100) ! (. mod 30)}, 1)</test>
    <result>
      <assert-deep-eq>31, 61, 91</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="array-index-of-008">
    <description>Select empty members</description>
    <created by="Michael Kay" on="2023-11-30"/>
    <test>array:index-of([1, 2, 3, (), 5, (), 7], ())</test>
    <result>
      <assert-deep-eq>4, 6</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="array-index-of-009">
    <description>Select empty members</description>
    <created by="Michael Kay" on="2023-11-30"/>
    <test>array:index-of([1, 2, 3, [], 5, [], 7], ())</test>
    <result>
      <assert-deep-eq>4, 6</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="array-index-of-010">
    <description>Select sequence members</description>
    <created by="Michael Kay" on="2023-11-30"/>
    <test>array:index-of([1, 2, 3, (10, 11, 12), 5, (20, 21, 22), 7], (10, 11, 12))</test>
    <result>
      <assert-eq>4</assert-eq>
    </result>
  </test-case>
  
  <test-case name="array-index-of-011">
    <description>Atomize sequence</description>
    <created by="Michael Kay" on="2023-11-30"/>
    <test><![CDATA[array:index-of(array{parse-xml("<doc><a>1</a><a>2</a><a>4</a></doc>")//a}, 4)]]></test>
    <result>
      <assert-eq>3</assert-eq>
    </result>
  </test-case>
  
  <test-case name="array-index-of-012">
    <description>Atomize search key</description>
    <created by="Michael Kay" on="2023-11-30"/>
    <test><![CDATA[array:index-of([11 to 15], parse-xml("<doc><a>44</a></doc>")//a})]]></test>
    <result>
      <assert-eq>4</assert-eq>
    </result>
  </test-case>
  
  

</test-set>
