<?xml version="1.0" encoding="us-ascii"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="fn-jnode-position" covers-40="PR2031">
   <description>Tests for the fn:jnode-position() function</description>


   <test-case name="fn-jnode-position-001">
      <description> Applied to root node </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>fn:jtree([1,2,3]) => fn:jnode-position()</test>
      <result>
         <assert-empty/>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-002">
      <description> Applied to root node </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>fn:jtree({}) => fn:jnode-position()</test>
      <result>
         <assert-empty/>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-003">
      <description> Applied to empty sequence </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>fn:jnode-position(())</test>
      <result>
         <assert-empty/>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-004">
      <description> Applied to child of array </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>[4,5,6] / child::get(2) => fn:jnode-position()</test>
      <result>
         <assert-eq>1</assert-eq>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-005">
      <description> Applied to integer entry in map </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>{'a':23, 'b':24} / child::b => fn:jnode-position()</test>
      <result>
         <assert-eq>1</assert-eq>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-006">
      <description> Applied to sequence entry in map </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>{'a': 23, 'b': 1 to 5} / b => fn:jnode-position()</test>
      <result>
         <assert-eq>1</assert-eq>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-007">
      <description> Sequence of arrays in map entry </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>{'a': 23, 'b': ([1,2,3], [4,5,6])} / b / * ! array{ fn:jnode-position() }</test>
      <result>
         <assert-deep-eq>[1],[1],[1],[2],[2],[2]</assert-deep-eq>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-008">
      <description> Sequence of arrays in map entry </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>{'a': 23, 'b': ([1,2,3], [4,5,6])} / * =!> fn:jnode-position()</test>
      <result>
         <assert-deep-eq>1, 1</assert-deep-eq>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-009" covers-40="PR2109">
      <description> Applied to context item </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>[2, 4, {'a':([20], [30])}] //type(xs:integer) [. = 30] ! fn:jnode-position()</test>
      <result>
         <assert-eq>2</assert-eq>
      </result>
   </test-case>
   
   
   <test-case name="fn-jnode-position-901">
      <description> Requires singleton </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>{xs:date('2019-01-01') : 23, xs:date('2020-01-01') : 24} / child::* => fn:jnode-position()</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-902">
      <description> Requires JNode </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>parse-xml("<a/>") => fn:jnode-position()</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-903">
      <description> Context item absent </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>fn() { fn:jnode-position() }()</test>
      <result>
         <error code="XPDY0002"/>
      </result>
   </test-case>
   
   <test-case name="fn-jnode-position-904">
      <description> Context item not a JNode </description>
      <created by="Michael Kay" on="2025-08-08"/>
      <test>parse-xml("<a/>") ! fn:jnode-position()</test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   


</test-set>