<?xml version="1.0" encoding="us-ascii"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="fn-range">
  <description>Tests for the fn:range() function (4.0 proposal)</description>
  <link type="spec" document="http://www.w3.org/TR/xpath-functions-30/" idref="func-range"/>

  <dependency type="feature" value="higherOrderFunctions"/>
  <dependency type="spec" value="XP40+ XQ40+"/>
  
  
  <test-case name="range-01">
    <description>Empty sequence</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range((), ())</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-02">
    <description>Empty sequence</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range((), (), ())</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-03">
    <description>Empty sequence</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range((), (), (), map{})</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-04">
    <description>Empty sequence</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range((), is-NaN#1, is-NaN#1)</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-05">
    <description>Empty sequence</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range((), is-NaN#1, is-NaN#1, map{})</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-06">
    <description>start, inclusive</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "c"))</test>
    <result>
      <assert-deep-eq>("c", "d", "e")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-07">
    <description>start, exclusive</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "c"), (), exclude-start:=true())</test>
    <result>
      <assert-deep-eq>("d", "e")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-08">
    <description>start, inclusive, non-matching</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "z"), (), exclude-start:=false())</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-09">
    <description>start, exclusive, non-matching</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "z"), (), exclude-start:=true())</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-10">
    <description>end, inclusive</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), (), matches(?, "b"))</test>
    <result>
      <assert-deep-eq>("a", "b")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-11">
    <description>end, exclusive</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), (), matches(?, "b"), exclude-end:=true())</test>
    <result>
      <assert-deep-eq>("a")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-12">
    <description>end, inclusive, match at start</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), (), matches(?, "a"), exclude-end:=false())</test>
    <result>
      <assert-deep-eq>("a")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-13">
    <description>end, exclusive, match at start</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), (), matches(?, "a"), exclude-end:=true())</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
  <test-case name="range-14">
    <description>end, inclusive, no match</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), (), matches(?, "z"))</test>
    <result>
      <assert-deep-eq>("a", "b", "c", "d", "e")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-15">
    <description>end, exclusive, no match</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), (), matches(?, "z"), exclude-end:=true())</test>
    <result>
      <assert-deep-eq>("a", "b", "c", "d", "e")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-16">
    <description>start and end, inclusive/inclusive</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "b"), matches(?, "d"))</test>
    <result>
      <assert-deep-eq>("b", "c", "d")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-17">
    <description>start and end, inclusive/inclusive, matching same item</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "b"), matches(?, "b"))</test>
    <result>
      <assert-eq>"b"</assert-eq>
    </result>
  </test-case>
  
  <test-case name="range-18">
    <description>start and end, exclusive/exclusive</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "b"), matches(?, "d"), exclude-start:=true(), exclude-end:=true())</test>
    <result>
      <assert-eq>"c"</assert-eq>
    </result>
  </test-case>
  
  <test-case name="range-19">
    <description>start and end, exclusive/exclusive, matching same item</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "b"), matches(?, "b"), exclude-start:=true(), exclude-end:=true())</test>
    <result>
      <assert-deep-eq>("c", "d", "e")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-20">
    <description>start and end, exclusive/inclusive, matching same item</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "b"), matches(?, "b"), exclude-start:=true(), exclude-end:=false())</test>
    <result>
      <assert-deep-eq>("c", "d", "e")</assert-deep-eq>
    </result>
  </test-case>
  
  <test-case name="range-21">
    <description>start and end, inclusive/exclusive, matching same item</description>
    <created by="Michael Kay" on="2020-12-03"/>
    <test>range(("a", "b", "c", "d", "e"), matches(?, "b"), matches(?, "b"), exclude-start:=false(), exclude-end:=true())</test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
 

</test-set>
